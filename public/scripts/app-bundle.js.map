{"version":3,"sources":["src/app.js","src/contact-list.js","src/contact-new.js","src/environment.js","src/main.js","src/web-api.js","src/resources/index.js"],"names":["App","message","configureRouter","config","router","title","map","route","moduleId","name","log","getLogger","ContactList","api","contacts","activePage","maxPage","lineCount","onCreating","selectedIdx","showList","getContactList","then","info","e","selected","allLineCount","LineCount","Math","floor","catch","error","created","onPageChanged","detail","onClickRow","idx","ContactNew","of","controller","toast","rules","ensure","required","withMessage","matches","addRenderer","contactName","orderDisplay","note","activeFlg","validateModel","validate","v","valid","body","addContact","results","navigate","show","debug","testing","configure","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","b","useAll","start","setRoot","WebAPI","isRequesting","page","strUrl","skipRows","fetch","response","status","rejected","json","postData","method","headers","JSON","stringify"],"mappings":";;;;;;;;;;;;;MAAaA,cAAAA;AACX,mBAAc;AAAA;;AACZ,WAAKC,OAAL,GAAe,cAAf;AACD;;kBAEDC,2CAAgBC,QAAQC,QAAQ;AAC9BD,aAAOE,KAAP,GAAe,UAAf;AACAF,aAAOG,GAAP,CAAW,CACT,EAACC,OAAO,EAAR,EAAYC,UAAU,cAAtB,EAAsCC,MAAM,aAA5C,EAA2DJ,OAAO,MAAlE,EADS,EAET,EAACE,OAAO,aAAR,EAAuBC,UAAU,aAAjC,EAAgDC,MAAM,YAAtD,EAFS,CAAX;AAID;;;;;;;;;;;;;;;;;;;;;ACPH,MAAIC,MAAM,6BAAWC,SAAX,CAAqB,cAArB,CAAV;;MAGaC,sBAAAA,sBADZ;AAEC,yBAAYC,GAAZ,EAAiB;AAAA;;AACf,WAAKA,GAAL,GAAWA,GAAX;AACA,WAAKC,QAAL,GAAgB,EAAhB;AACA,WAAKC,UAAL,GAAkB,CAAlB;AACA,WAAKC,OAAL,GAAe,CAAf;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA,WAAKC,UAAL,GAAkB,KAAlB;AACA,WAAKC,WAAL,GAAmB,CAAC,CAApB;AACD;;0BAEDC,+BAAW;AAAA;;AACT,WAAKP,GAAL,CAASQ,cAAT,CAAwB,KAAKN,UAA7B,EAAyC,KAAKE,SAA9C,EAAyDK,IAAzD,CAA8D,oBAAY;AACxEZ,YAAIa,IAAJ,CAAS,UAAT;AACAb,YAAIa,IAAJ,CAAST,QAAT;AACA,cAAKA,QAAL,GAAgBA,SAASR,GAAT,CAAa,UAACkB,CAAD,EAAO;AAClCA,YAAEC,QAAF,GAAa,KAAb;AACA,iBAAOD,CAAP;AACD,SAHe,CAAhB;AAIA,YAAIE,eAAeZ,SAAS,CAAT,EAAYa,SAA/B;AACA,cAAKX,OAAL,GAAeY,KAAKC,KAAL,CAAWH,eAAe,MAAKT,SAA/B,CAAf;AACA,YAAIS,eAAe,MAAKT,SAApB,KAAkC,CAAtC,EAAyC;AACvC,gBAAKD,OAAL,IAAgB,CAAhB;AACD;AACF,OAZD,EAYGc,KAZH,CAYS,iBAAS;AAChBpB,YAAIa,IAAJ,CAAS,QAAT;AACAb,YAAIa,IAAJ,CAASQ,KAAT;AACD,OAfD;AAgBD;;0BAEDC,6BAAU;AACR,WAAKd,UAAL,GAAkB,IAAlB;AACAR,UAAIa,IAAJ,CAAS,UAAT;AACA,WAAKH,QAAL;AACD;;0BAEDa,uCAAcT,GAAG;AACfd,UAAIa,IAAJ,mBAAyBC,EAAEU,MAA3B;AACA,UAAI,KAAKhB,UAAT,EAAqB;AACnB,aAAKA,UAAL,GAAkB,KAAlB;AACD,OAFD,MAEO;AACL,aAAKH,UAAL,GAAkBS,EAAEU,MAApB;AACA,aAAKd,QAAL;AACD;AACD,UAAI,KAAKD,WAAL,IAAoB,CAAxB,EAA2B;AACzB,aAAKL,QAAL,CAAc,KAAKK,WAAnB,EAAgCM,QAAhC,GAA2C,KAA3C;AACA,aAAKN,WAAL,GAAmB,CAAC,CAApB;AACD;AACF;;0BAEDgB,iCAAWC,KAAK;AACd1B,UAAIa,IAAJ,CAASa,GAAT;AACA,UAAI,KAAKjB,WAAL,KAAqBiB,GAAzB,EAA8B;AAC5B,aAAKtB,QAAL,CAAc,KAAKK,WAAnB,EAAgCM,QAAhC,GAA2C,KAA3C;AACA,aAAKN,WAAL,GAAmB,CAAC,CAApB;AACD,OAHD,MAGO;AACL,YAAI,KAAKA,WAAL,IAAoB,CAAxB,EAA2B;AACzB,eAAKL,QAAL,CAAc,KAAKK,WAAnB,EAAgCM,QAAhC,GAA2C,KAA3C;AACD;AACD,aAAKX,QAAL,CAAcsB,GAAd,EAAmBX,QAAnB,GAA8B,IAA9B;AACA,aAAKN,WAAL,GAAmBiB,GAAnB;AACD;AACF;;;;;;;;;;;;;;;;;;;;;AC7DH,MAAI1B,MAAM,6BAAWC,SAAX,CAAqB,cAArB,CAAV;;MAGa0B,qBAAAA,qBADZ,8CAAe,8BAAYC,EAAZ,yCAAf;AAaC,wBAAYzB,GAAZ,EAAiB0B,UAAjB,EAA6BC,KAA7B,EAAoCpC,MAApC,EAA4C;AAAA;;AAAA,WAX5CqC,KAW4C,GAXpC,mCACLC,MADK,CACE,aADF,EAEHC,QAFG,GAGDC,WAHC,CAGW,YAHX,EAILF,MAJK,CAIE,cAJF,EAKHC,QALG,GAMDC,WANC,CAMW,UANX,EAOHC,OAPG,CAOK,QAPL,EAQDD,WARC,CAQW,YARX,EASHH,KAEuC;;AAC1C,WAAK5B,GAAL,GAAWA,GAAX;AACA,WAAK0B,UAAL,GAAkBA,UAAlB;AACA,WAAKA,UAAL,CAAgBO,WAAhB,CAA4B,iEAA5B;AACA,WAAKN,KAAL,GAAaA,KAAb;AACA,WAAKpC,MAAL,GAAcA,MAAd;;AAEA,WAAK2C,WAAL,GAAmB,EAAnB;AACA,WAAKC,YAAL,GAAoB,EAApB;AACA,WAAKC,IAAL,GAAY,EAAZ;AACA,WAAKC,SAAL,GAAiB,IAAjB;AACAxC,UAAIa,IAAJ,CAAS,wBAAT;AACD;;yBAED4B,yCAAgB;AAAA;;AACd,WAAKZ,UAAL,CAAgBa,QAAhB,GAA2B9B,IAA3B,CAAgC,aAAK;AACnC,YAAI+B,EAAEC,KAAN,EAAa;AACX5C,cAAIa,IAAJ,CAAS,QAAT;AACA,cAAIgC,OAAO,CAAC;AACV,2BAAe,MAAKR,WADV;AAEV,4BAAgB,MAAKC,YAFX;AAGV,yBAAa,MAAKE,SAAL,GAAiB,CAAjB,GAAqB,CAHxB;AAIV,6BAAiB,IAJP;AAKV,oBAAQ,MAAKD,IALH;AAMV,gCAAoB;AANV,WAAD,CAAX;AAQA,gBAAKpC,GAAL,CAAS2C,UAAT,CAAoBD,IAApB,EAA0BjC,IAA1B,CAA+B,mBAAW;AACxCZ,gBAAIa,IAAJ,CAAS,SAAT;AACAb,gBAAIa,IAAJ,CAASkC,OAAT;AACA,kBAAKrD,MAAL,CAAYsD,QAAZ,CAAqB,GAArB;AACD,WAJD,EAIG5B,KAJH,CAIS,iBAAS;AAChBpB,gBAAIa,IAAJ,CAAS,QAAT;AACAb,gBAAIa,IAAJ,CAASQ,KAAT;AACD,WAPD;AAQD,SAlBD,MAkBO;AAEL,gBAAKS,KAAL,CAAWmB,IAAX,CAAgB,kBAAhB,EAAoC,IAApC,EAA0C,gBAA1C;AACD;AACF,OAvBD;AAwBD;;yBAED3B,6BAAU;AACRtB,UAAIa,IAAJ,CAAS,oBAAT;AACD;;;;;;;;;;;oBClEY;AACbqC,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCECC,YAAAA;;;;;;;;;;AAAT,WAASA,SAAT,CAAmBC,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYN,KAAhB,EAAuB;AACrBG,cAAQC,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYN,OAAhB,EAAyB;AACvBE,cAAQC,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDL,YAAQC,GAAR,CAAYI,MAAZ,CAAmB,4BAAnB,EAAiD;AAAA,aAAKC,EAAEC,MAAF,EAAL;AAAA,KAAjD;AACAP,YAAQC,GAAR,CAAYI,MAAZ,CAAmB,oBAAnB;;AAEAL,YAAQQ,KAAR,GAAgBjD,IAAhB,CAAqB;AAAA,aAAMyC,QAAQS,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;ACjBD,MAAI9D,MAAM,6BAAWC,SAAX,CAAqB,SAArB,CAAV;;MAEa8D,iBAAAA;;;;WACXC,eAAe;;;qBAEfrD,yCAAesD,MAAM1D,WAAW;AAAA;;AAC9B,WAAKyD,YAAL,GAAoB,IAApB;AACA,UAAIE,SAAS,gDAAb;AACA,UAAIC,WAAW,CAACF,OAAO,CAAR,IAAa1D,SAA5B;AACA2D,gBAAUC,WAAW,GAAX,GAAiB5D,SAA3B;AACA,aAAO6D,MAAMF,MAAN,EACJtD,IADI,CACC,oBAAY;AAChB,cAAKoD,YAAL,GAAoB,KAApB;AACAhE,YAAIa,IAAJ,CAAS,UAAT;AACAb,YAAIa,IAAJ,CAASwD,QAAT;AACA,YAAIA,SAASC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BC,mBAASF,QAAT;AACD,SAFD,MAEO;AACL,iBAAOA,SAASG,IAAT,EAAP;AACD;AACF,OAVI,EAUFpD,KAVE,CAUI,iBAAS;AAChB,cAAK4C,YAAL,GAAoB,KAApB;AACAhE,YAAIa,IAAJ,CAAS,QAAT;AACAb,YAAIa,IAAJ,CAASwD,QAAT;AACA,eAAOhD,MAAMmD,IAAN,EAAP;AACD,OAfI,CAAP;AAgBD;;qBAED1B,iCAAW2B,UAAU;AAAA;;AACnB,WAAKT,YAAL,GAAoB,IAApB;AACA,UAAIE,SAAS,gDAAb;AACA,aAAOE,MAAMF,MAAN,EAAc;AACnBQ,gBAAQ,MADW;AAEnBC,iBAAS,EAAC,gBAAgB,kBAAjB,EAFU;AAGnB9B,cAAM+B,KAAKC,SAAL,CAAeJ,QAAf;AAHa,OAAd,EAIJ7D,IAJI,CAIC,oBAAY;AAClB,eAAKoD,YAAL,GAAoB,KAApB;AACAhE,YAAIa,IAAJ,CAAS,UAAT;AACAb,YAAIa,IAAJ,CAASwD,QAAT;AACA,YAAIA,SAASC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BC,mBAASF,QAAT;AACD,SAFD,MAEO;AACL,iBAAOA,SAASG,IAAT,EAAP;AACD;AACF,OAbM,EAaJpD,KAbI,CAaE,iBAAS;AAChB,eAAK4C,YAAL,GAAoB,KAApB;AACAhE,YAAIa,IAAJ,CAAS,QAAT;AACAb,YAAIa,IAAJ,CAASwD,QAAT;AACA,eAAOhD,MAAMmD,IAAN,EAAP;AACD,OAlBM,CAAP;AAmBD;;;;;;;;;;;UCpDapB,YAAAA;AAAT,WAASA,SAAT,CAAmB3D,MAAnB,EAA2B,CAEjC","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Contacts';\n    config.map([\n      {route: '', moduleId: 'contact-list', name: 'contactList', title: 'List'},\n      {route: 'contactNew/', moduleId: 'contact-new', name: 'contactNew'}\n    ]);\n  }\n}\n","import {WebAPI} from './web-api';\nimport {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\n\nlet log = LogManager.getLogger('contact-list');\n\n@inject(WebAPI)\nexport class ContactList {\n  constructor(api) {\n    this.api = api;\n    this.contacts = [];\n    this.activePage = 1;\n    this.maxPage = 1;\n    this.lineCount = 10;\n    this.onCreating = false;\n    this.selectedIdx = -1;\n  }\n\n  showList() {\n    this.api.getContactList(this.activePage, this.lineCount).then(contacts => {\n      log.info('Success!');\n      log.info(contacts);\n      this.contacts = contacts.map((e) => {\n        e.selected = false;\n        return e;\n      });\n      let allLineCount = contacts[0].LineCount;\n      this.maxPage = Math.floor(allLineCount / this.lineCount);\n      if (allLineCount % this.lineCount !== 0) {\n        this.maxPage += 1;\n      }\n    }).catch(error => {\n      log.info('Error!');\n      log.info(error);\n    });\n  }\n\n  created() {\n    this.onCreating = true;\n    log.info('created!');\n    this.showList();\n  }\n\n  onPageChanged(e) {\n    log.info(`page changed ${e.detail}`);\n    if (this.onCreating) {\n      this.onCreating = false;\n    } else {\n      this.activePage = e.detail;\n      this.showList();\n    }\n    if (this.selectedIdx >= 0) {\n      this.contacts[this.selectedIdx].selected = false;\n      this.selectedIdx = -1;\n    }\n  }\n\n  onClickRow(idx) {\n    log.info(idx);\n    if (this.selectedIdx === idx) {\n      this.contacts[this.selectedIdx].selected = false;\n      this.selectedIdx = -1;\n    } else {\n      if (this.selectedIdx >= 0) {\n        this.contacts[this.selectedIdx].selected = false;\n      }\n      this.contacts[idx].selected = true;\n      this.selectedIdx = idx;\n    }\n  }\n}\n","import {WebAPI} from './web-api';\nimport {inject, NewInstance} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\nimport { ValidationController, ValidationRules } from 'aurelia-validation';\nimport { MaterializeFormValidationRenderer } from 'aurelia-materialize-bridge';\nimport { MdToastService } from 'aurelia-materialize-bridge';\nimport {Router} from 'aurelia-router';\n\nlet log = LogManager.getLogger('contact-list');\n\n@inject(WebAPI, NewInstance.of(ValidationController), MdToastService, Router)\nexport class ContactNew {\n  rules = ValidationRules\n    .ensure('contactName')\n      .required()\n        .withMessage('連絡先名称は必須です')\n    .ensure('orderDisplay')\n      .required()\n        .withMessage('表示順は必須です')\n      .matches(/[0-9]+/)\n        .withMessage('数値を指定して下さい')\n      .rules;\n\n  constructor(api, controller, toast, router) {\n    this.api = api;\n    this.controller = controller;\n    this.controller.addRenderer(new MaterializeFormValidationRenderer());\n    this.toast = toast;\n    this.router = router;\n\n    this.contactName = '';\n    this.orderDisplay = '';\n    this.note = '';\n    this.activeFlg = true;\n    log.info('ContactNew-constructor');\n  }\n\n  validateModel() {\n    this.controller.validate().then(v => {\n      if (v.valid) {\n        log.info('pass-1');\n        let body = [{\n          'contactName': this.contactName,\n          'orderDisplay': this.orderDisplay,\n          'activeFlg': this.activeFlg ? 1 : 0,\n          'flgChangeDate': null,\n          'note': this.note,\n          'updateEmployeeCD': 'izu_t'\n        }];\n        this.api.addContact(body).then(results => {\n          log.info('Success');\n          log.info(results);\n          this.router.navigate('/');\n        }).catch(error => {\n          log.info('Error!');\n          log.info(error);\n        });\n      } else {\n        //this.message = 'You have errors!';\n        this.toast.show('You have errors!', 4000, 'red white-text');\n      }\n    });\n  }\n\n  created() {\n    log.info('ContactNew-created');\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.use.plugin('aurelia-materialize-bridge', b => b.useAll());\n  aurelia.use.plugin('aurelia-validation');\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {LogManager} from 'aurelia-framework';\n\nlet log = LogManager.getLogger('web-api');\n\nexport class WebAPI {\n  isRequesting = false;\n\n  getContactList(page, lineCount) {\n    this.isRequesting = true;\n    let strUrl = 'https://izufr01.azurewebsites.net/api/SA21/01/';\n    let skipRows = (page - 1) * lineCount;\n    strUrl += skipRows + '/' + lineCount;\n    return fetch(strUrl)\n      .then(response => {\n        this.isRequesting = false;\n        log.info('Success!');\n        log.info(response);\n        if (response.status !== 200) {\n          rejected(response);\n        } else {\n          return response.json();\n        }\n      }).catch(error => {\n        this.isRequesting = false;\n        log.info('Error!');\n        log.info(response);\n        return error.json();\n      });\n  }\n\n  addContact(postData) {\n    this.isRequesting = true;\n    let strUrl = 'https://izufr01.azurewebsites.net/api/SA21/01/';\n    return fetch(strUrl, {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(postData)\n    }).then(response => {\n      this.isRequesting = false;\n      log.info('Success!');\n      log.info(response);\n      if (response.status !== 200) {\n        rejected(response);\n      } else {\n        return response.json();\n      }\n    }).catch(error => {\n      this.isRequesting = false;\n      log.info('Error!');\n      log.info(response);\n      return error.json();\n    });\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":".."}